{"ast":null,"code":"var _jsxFileName = \"D:\\\\NodeJs\\\\Full-Ecommerce-template\\\\ecommerce\\\\ecommerce\\\\website\\\\src\\\\app\\\\components\\\\web\\\\views\\\\checkout\\\\index.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { NotificationManager } from 'react-notifications';\nimport { GetUserLogin, GetOrderDetails, CartHelper } from '../../../services';\nimport { removeFromCart, incrementToCart, decreaseToCart } from \"../../../../store/actions/cartActions\";\nimport Deliverydetails from './delivery';\nimport Loader from '../../../../loader';\n\nclass Checkout extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleRadioChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.handleDeliveryAddress = value => {\n      this.setState({\n        deliveryAddress: value\n      });\n    };\n\n    this.handlePlaceOrder = async event => {\n      event.preventDefault();\n      const {\n        customer,\n        grandTotal,\n        deliveryAddress,\n        paymentmethod\n      } = this.state;\n      let orderId = Math.floor(Math.random() * Math.floor(Math.random() * Date.now()));\n      let {\n        cartItems\n      } = this.props;\n      let data = {\n        customerId: customer.id,\n        paymentmethod: paymentmethod,\n        orderId: orderId,\n        deliveryAddress: deliveryAddress,\n        product: cartItems,\n        grandTotal,\n        grandTotal\n      };\n\n      if (data) {\n        let order = await GetOrderDetails.getOrderCreateByUser(JSON.stringify(data));\n\n        if (order) {\n          NotificationManager.success(\"Successfully Ordered\", \"Order\");\n          setTimeout(async function () {\n            CartHelper.emptyCart();\n          }, 1000);\n        } else {\n          NotificationManager.error(\"Order is declined\", \"Order\");\n          setTimeout(async function () {\n            window.location.href = \"/failed\";\n          }, 1000);\n        }\n      }\n    };\n\n    this.handlePaymentSystem = async e => {\n      e.preventDefault();\n      const {\n        customer,\n        grandTotal,\n        deliveryAddress,\n        paymentmethod\n      } = this.state;\n      let {\n        cartItems\n      } = this.props;\n      let orderId = Math.floor(Math.random() * Math.floor(Math.random() * Date.now()));\n      this.setState({\n        isLoaded: true\n      });\n      console.log(\"deliveryAddress\", deliveryAddress);\n\n      if (deliveryAddress) {\n        //payment system\n        const res = await this.loadScript(\"https://checkout.razorpay.com/v1/checkout.js\");\n\n        if (!res) {\n          alert(\"Razorpay SDK failed to load. Are you online?\");\n          return;\n        } //creating new order\n\n\n        let data1 = {\n          amount: grandTotal,\n          order_id: orderId,\n          \"currency\": \"INR\",\n          payment_capture: 1\n        };\n        const result = await GetOrderDetails.getPaymentValue(data1);\n\n        if (!result.data) {\n          alert(\"Server error. Are you online?\");\n          return;\n        } else {\n          const __DEV__ = document.domain === 'localhost';\n\n          var options = {\n            \"key\": __DEV__ ? \"rzp_test_OkYZMYKswptVZX\" : \"rzp_test_OkYZMYKswptVZX\",\n            \"currency\": result.data.currency,\n            \"amount\": result.data.amount * 100,\n            \"order_id\": result.data.id,\n            \"name\": \"CityBaazar\",\n            \"description\": \"Test Transaction\",\n            \"image\": \"https://example.com/your_logo\",\n            \"handler\": async function (response) {\n              const list = {\n                custId: customer.id,\n                orderCreationId: orderId,\n                razorpayPaymentId: response.razorpay_payment_id,\n                razorpayOrderId: response.razorpay_order_id\n              };\n              const result = await GetOrderDetails.getPaymentOrderList(list);\n\n              if (result.data) {\n                const EMPTY_CART = {\n                  cartItems: []\n                };\n                const carts = cartItems || EMPTY_CART;\n                setTimeout(async function () {\n                  let data = {\n                    customerId: customer.id,\n                    paymentmethod: result.data.method,\n                    orderId: orderId,\n                    deliveryAddress: deliveryAddress,\n                    product: carts,\n                    grandTotal: result.data.amount / 100\n                  };\n                  let order = await GetOrderDetails.getOrderCreateByUser(JSON.stringify(data));\n\n                  if (order) {\n                    NotificationManager.success(\"Successfully Ordered\", \"Order\"); // this.setState({ isLoaded: false})\n\n                    setTimeout(async function () {\n                      CartHelper.emptyCart();\n                    }, 1000);\n                  }\n                }, 1000);\n              } else {\n                window.location.href = \"/order/failed\";\n              } // console.log(result)\n\n            },\n            prefill: {\n              name: \"\",\n              email: '',\n              phone_number: ''\n            },\n            \"notes\": {\n              \"address\": \"Razorpay Corporate Office\"\n            },\n            \"theme\": {\n              \"color\": \"#3399cc\"\n            }\n          };\n          let payementObject = new window.Razorpay(options);\n          payementObject.open();\n        }\n      } else {\n        NotificationManager.error(\"Please! check address details\", \"Input Field\");\n      }\n    };\n\n    this.state = {\n      isLoaded: false,\n      subTotal: '',\n      discount: '',\n      deliveryCharge: 0,\n      grandTotal: '',\n      email: '',\n      customer: '',\n      paymentmethod: '',\n      deliveryAddress: ''\n    };\n  }\n\n  async componentDidMount() {\n    let email = sessionStorage.getItem('email');\n\n    if (email) {\n      let user = await GetUserLogin.getCustomerDetail(email);\n\n      if (user) {\n        this.setState({\n          customer: user.data,\n          email: email\n        });\n      }\n    }\n\n    let cart = this.props.cartItems;\n    let subTotal = cart.reduce((sum, i) => sum += i.qty * i.netPrice, 0);\n    let discount = cart.reduce((sum, i) => sum += i.discount, 0);\n    let grandTotal = subTotal + discount + this.state.deliveryCharge;\n    this.setState({\n      subTotal: subTotal,\n      discount: discount,\n      grandTotal: grandTotal,\n      deliveryCharge: this.state.deliveryCharge\n    });\n  }\n\n  loadScript(src) {\n    return new Promise(resolve => {\n      const script = document.createElement(\"script\");\n      script.src = src;\n\n      script.onload = () => {\n        resolve(true);\n      };\n\n      script.onerror = () => {\n        resolve(false);\n      };\n\n      document.body.appendChild(script);\n    });\n  }\n\n  render() {\n    const {\n      cartItems\n    } = this.props;\n    const {\n      subTotal,\n      discount,\n      deliveryCharge,\n      grandTotal,\n      email,\n      customer,\n      paymentmethod,\n      isLoaded\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"pt-3 pb-3 page-info section-padding border-bottom bg-white single-product-header-bk\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      class: \"mdi mdi-home\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 53\n      }\n    }), \" Home\")), \" \", /*#__PURE__*/React.createElement(\"span\", {\n      class: \"mdi mdi-chevron-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 106\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"a\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 150\n      }\n    }, \"Checkout\"))))), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"checkout-page section-padding\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 21\n      }\n    }, isLoaded ? /*#__PURE__*/React.createElement(Loader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 40\n      }\n    }) : '', /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"checkout-step\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"accordion\",\n      id: \"accordionExample\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card checkout-step-one\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header\",\n      id: \"headingOne\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"mb-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-link checkout-login-bk\",\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"number\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 57\n      }\n    }, \"1\"), \" Login \", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"mdi mdi-checkbox-marked-circle-outline\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 97\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"_2jDL7w\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 78\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"dNZmcB\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 83\n      }\n    }, customer.firstName, \" \"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"_3MeY5j\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 136\n      }\n    }, email)))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card checkout-step-two\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header\",\n      id: \"headingTwo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"mb-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-link collapsed\",\n      type: \"button\",\n      \"data-toggle\": \"collapse\",\n      \"data-target\": \"#collapseTwo\",\n      \"aria-expanded\": \"false\",\n      \"aria-controls\": \"collapseTwo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"number\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 57\n      }\n    }, \"2\"), \" Delivery Address\"))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"collapseTwo\",\n      className: \"collapse\",\n      \"aria-labelledby\": \"headingTwo\",\n      \"data-parent\": \"#accordionExample\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(Deliverydetails, {\n      onSelectDeliveryAddress: this.handleDeliveryAddress,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 49\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header\",\n      id: \"headingThree\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"mb-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-link collapsed\",\n      type: \"button\",\n      \"data-toggle\": \"collapse\",\n      \"data-target\": \"#collapseThree\",\n      \"aria-expanded\": \"false\",\n      \"aria-controls\": \"collapseThree\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"number\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 57\n      }\n    }, \"3\"), \" Payment\"))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"collapseThree\",\n      className: \"collapse\",\n      \"aria-labelledby\": \"headingThree\",\n      \"data-parent\": \"#accordionExample\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"checkout-step-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"payment_method-checkout\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 57\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 61\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"rpt100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 65\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"radio--group-inline-container_1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 69\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 73\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"radio-item_1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 77\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      id: \"cashondelivery1\",\n      value: \"cash\",\n      name: \"paymentmethod\",\n      type: \"radio\",\n      onChange: this.handleRadioChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 81\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"cashondelivery1\",\n      className: \"radio-label_1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 81\n      }\n    }, \"Cash on Delivery\"))), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 73\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"radio-item_1\",\n      onClick: this.handlePaymentSystem,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 77\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"card1\",\n      className: \"radio-label_1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 81\n      }\n    }, \"Pay With Card\"))))), paymentmethod === \"cash\" ? /*#__PURE__*/React.createElement(\"button\", {\n      className: \"next-btn16 hover-btn\",\n      onClick: this.handlePlaceOrder,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 73\n      }\n    }, \"Confirm Order\") : ''))))))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 37\n      }\n    }, \"My Cart \", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"text-secondary float-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 73\n      }\n    }, \"(\", cartItems.length, \" item)\")), cartItems.map((row, index) => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body pt-0 pr-0 pl-0 pb-0\",\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cart-list-product\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"img-fluid\",\n      src: row.photo,\n      alt: \"cart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 53\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"badge badge-success\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 53\n      }\n    }, row.discountPer, \"% OFF\"), /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 53\n      }\n    }, row.name), /*#__PURE__*/React.createElement(\"h6\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 57\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"mdi mdi-approval\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 65\n      }\n    }), \" Available in\"), \" - \", row.unitSize, \" gm\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"offer-price mb-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 53\n      }\n    }, \"\\u20B9\", row.qty + '*' + row.netPrice, \" \", /*#__PURE__*/React.createElement(\"i\", {\n      className: \"mdi mdi-tag-outline\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 124\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"regular-price\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 162\n      }\n    }, \"\\u20B9\", row.price))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"total-checkout-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cart-total-dil\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 45\n      }\n    }, \"Sub Total\"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 45\n      }\n    }, \"\\u20B9\", subTotal)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cart-total-dil pt-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 45\n      }\n    }, \"Delivery Charges\"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 45\n      }\n    }, \"\\u20B9\", deliveryCharge))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cart-total-dil saving-total \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 41\n      }\n    }, \"Total Saving\"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 41\n      }\n    }, \"\\u20B9\", discount)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"main-total-cart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 41\n      }\n    }, \"Total\"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 41\n      }\n    }, \"\\u20B9\", grandTotal))))))));\n  }\n\n}\n\nexport default connect(state => ({\n  cartItems: state.cart.cartItems\n}), {\n  incrementToCart,\n  decreaseToCart,\n  removeFromCart\n})(Checkout);","map":{"version":3,"sources":["D:/NodeJs/Full-Ecommerce-template/ecommerce/ecommerce/website/src/app/components/web/views/checkout/index.js"],"names":["React","Component","connect","NotificationManager","GetUserLogin","GetOrderDetails","CartHelper","removeFromCart","incrementToCart","decreaseToCart","Deliverydetails","Loader","Checkout","constructor","props","handleRadioChange","e","setState","target","name","value","handleDeliveryAddress","deliveryAddress","handlePlaceOrder","event","preventDefault","customer","grandTotal","paymentmethod","state","orderId","Math","floor","random","Date","now","cartItems","data","customerId","id","product","order","getOrderCreateByUser","JSON","stringify","success","setTimeout","emptyCart","error","window","location","href","handlePaymentSystem","isLoaded","console","log","res","loadScript","alert","data1","amount","order_id","payment_capture","result","getPaymentValue","__DEV__","document","domain","options","currency","response","list","custId","orderCreationId","razorpayPaymentId","razorpay_payment_id","razorpayOrderId","razorpay_order_id","getPaymentOrderList","EMPTY_CART","carts","method","prefill","email","phone_number","payementObject","Razorpay","open","subTotal","discount","deliveryCharge","componentDidMount","sessionStorage","getItem","user","getCustomerDetail","cart","reduce","sum","i","qty","netPrice","src","Promise","resolve","script","createElement","onload","onerror","body","appendChild","render","firstName","length","map","row","index","photo","discountPer","unitSize","price"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport { NotificationManager } from 'react-notifications';\nimport { GetUserLogin, GetOrderDetails, CartHelper } from '../../../services';\nimport { removeFromCart, incrementToCart, decreaseToCart } from \"../../../../store/actions/cartActions\";\nimport Deliverydetails from './delivery';\nimport Loader from '../../../../loader'\nclass Checkout extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            isLoaded: false,\n            subTotal: '', discount: '', deliveryCharge: 0, grandTotal: '', email: '', customer: '', paymentmethod: '', deliveryAddress: ''\n        }\n    }\n    handleRadioChange = e => {\n        this.setState({ [e.target.name]: e.target.value })\n    }\n    handleDeliveryAddress = (value) => {\n        this.setState({ deliveryAddress: value })\n    }\n    async componentDidMount() {\n        let email = sessionStorage.getItem('email')\n        if (email) {\n            let user = await GetUserLogin.getCustomerDetail(email);\n            if (user) {\n                this.setState({ customer: user.data, email: email })\n            }\n        }\n        let cart = this.props.cartItems;\n        let subTotal = cart.reduce((sum, i) => (sum += i.qty * i.netPrice), 0)\n        let discount = cart.reduce((sum, i) => (sum += i.discount), 0)\n        let grandTotal = subTotal + discount + this.state.deliveryCharge;\n\n        this.setState({ subTotal: subTotal, discount: discount, grandTotal: grandTotal, deliveryCharge: this.state.deliveryCharge })\n\n    }\n    handlePlaceOrder = async (event) => {\n        event.preventDefault();\n        const { customer, grandTotal, deliveryAddress, paymentmethod } = this.state;\n        let orderId = Math.floor(Math.random() * Math.floor(Math.random() * Date.now()))\n        let { cartItems } = this.props\n        let data = { customerId: customer.id, paymentmethod: paymentmethod, orderId: orderId, deliveryAddress: deliveryAddress, product: cartItems, grandTotal, grandTotal }\n        if (data) {\n            let order = await GetOrderDetails.getOrderCreateByUser(JSON.stringify(data));\n            if (order) {\n                NotificationManager.success(\"Successfully Ordered\", \"Order\");\n                setTimeout(\n                    async function () {\n                        CartHelper.emptyCart();\n                    },\n                    1000\n                );\n            } else {\n                NotificationManager.error(\"Order is declined\", \"Order\");\n                setTimeout(\n                    async function () {\n                        window.location.href = \"/failed\"\n                    },\n                    1000\n                );\n            }\n        }\n    }\n\n    loadScript(src) {\n        return new Promise((resolve) => {\n            const script = document.createElement(\"script\");\n            script.src = src;\n            script.onload = () => {\n                resolve(true);\n            };\n            script.onerror = () => {\n                resolve(false);\n            };\n            document.body.appendChild(script);\n        });\n    }\n\n    handlePaymentSystem = async (e) => {\n        e.preventDefault();\n        const { customer, grandTotal, deliveryAddress, paymentmethod } = this.state;\n        let { cartItems } = this.props\n        let orderId = Math.floor(Math.random() * Math.floor(Math.random() * Date.now()))\n        this.setState({ isLoaded: true})\n        console.log(\"deliveryAddress\", deliveryAddress)\n        if(deliveryAddress){\n            //payment system\n        const res = await this.loadScript(\n            \"https://checkout.razorpay.com/v1/checkout.js\"\n        );\n\n        if (!res) {\n            alert(\"Razorpay SDK failed to load. Are you online?\");\n            return;\n        }\n\n        //creating new order\n        let data1 = { amount: grandTotal, order_id: orderId, \"currency\": \"INR\", payment_capture: 1 }\n        const result = await GetOrderDetails.getPaymentValue(data1);\n        if (!result.data) {\n            alert(\"Server error. Are you online?\");\n            return;\n        } else {\n            const __DEV__ = document.domain === 'localhost';\n            var options = {\n                \"key\": __DEV__ ? \"rzp_test_OkYZMYKswptVZX\" : \"rzp_test_OkYZMYKswptVZX\",\n                \"currency\": result.data.currency,\n                \"amount\": result.data.amount * 100,\n                \"order_id\": result.data.id,\n                \"name\": \"CityBaazar\",\n                \"description\": \"Test Transaction\",\n                \"image\": \"https://example.com/your_logo\",\n                \"handler\": async function (response) {\n                    const list = {\n                        custId: customer.id,\n                        orderCreationId: orderId,\n                        razorpayPaymentId: response.razorpay_payment_id,\n                        razorpayOrderId: response.razorpay_order_id,\n                    };\n                    const result = await GetOrderDetails.getPaymentOrderList(list);\n                    if (result.data) {\n                        const EMPTY_CART = { cartItems: [] }\n                        const carts = cartItems || EMPTY_CART;\n                         setTimeout(\n                            async function () {\n                    let data = { customerId: customer.id, paymentmethod: result.data.method, orderId: orderId, deliveryAddress: deliveryAddress, product: carts, grandTotal: result.data.amount / 100 }\n                        \n                            let order = await GetOrderDetails.getOrderCreateByUser(JSON.stringify(data));\n                            if (order) {\n                                NotificationManager.success(\"Successfully Ordered\", \"Order\");\n                                // this.setState({ isLoaded: false})\n                                setTimeout(\n                                    async function () {\n                                        CartHelper.emptyCart();\n                                    },\n                                    1000\n                                );\n                        }\n                            },\n                            1000\n                        );\n\n                       \n                    }else{\n                        window.location.href = \"/order/failed\";\n                    }\n                    // console.log(result)\n                },\n                prefill: {\n                    name: \"\",\n                    email: '',\n                    phone_number: ''\n                },\n                \"notes\": {\n                    \"address\": \"Razorpay Corporate Office\"\n                },\n                \"theme\": {\n                    \"color\": \"#3399cc\"\n                }\n            };\n            let payementObject = new window.Razorpay(options);\n            payementObject.open();\n        }\n        }else{\n            NotificationManager.error(\"Please! check address details\", \"Input Field\");\n        }\n        \n\n    }\n    render() {\n        const { cartItems } = this.props;\n        const { subTotal, discount, deliveryCharge, grandTotal, email, customer, paymentmethod, isLoaded } = this.state;\n        return (\n            <div>\n                <section className=\"pt-3 pb-3 page-info section-padding border-bottom bg-white single-product-header-bk\">\n                    <div className=\"container\">\n                        <div className=\"row\">\n                            <div className=\"col-md-12\">\n                                <a href=\"/\"><strong><span class=\"mdi mdi-home\"></span> Home</strong></a> <span class=\"mdi mdi-chevron-right\"></span> <a >Checkout</a>\n                            </div>\n                        </div>\n                    </div>\n                </section>\n\n                <section className=\"checkout-page section-padding\">\n                    <div className=\"container\">\n                        {\n                            isLoaded ? <Loader />: ''\n                        }\n                        <div className=\"row\">\n                            <div className=\"col-md-8\">\n                                <div className=\"checkout-step\">\n                                    <div className=\"accordion\" id=\"accordionExample\">\n                                        <div className=\"card checkout-step-one\">\n                                            <div className=\"card-header\" id=\"headingOne\">\n                                                <h5 className=\"mb-0\">\n                                                    <button className=\"btn btn-link checkout-login-bk\" disabled>\n                                                        <span className=\"number\">1</span> Login <span className=\"mdi mdi-checkbox-marked-circle-outline\"></span>\n                                                    </button>\n                                                    <div className=\"_2jDL7w\"><div><span className=\"dNZmcB\">{customer.firstName} </span><span className=\"_3MeY5j\">{email}</span></div></div>\n                                                </h5>\n                                            </div>\n                                        </div>\n                                        <div className=\"card checkout-step-two\">\n                                            <div className=\"card-header\" id=\"headingTwo\">\n                                                <h5 className=\"mb-0\">\n                                                    <button className=\"btn btn-link collapsed\" type=\"button\" data-toggle=\"collapse\" data-target=\"#collapseTwo\" aria-expanded=\"false\" aria-controls=\"collapseTwo\">\n                                                        <span className=\"number\">2</span> Delivery Address\n                                                    </button>\n                                                </h5>\n                                            </div>\n                                            <div id=\"collapseTwo\" className=\"collapse\" aria-labelledby=\"headingTwo\" data-parent=\"#accordionExample\">\n                                                <Deliverydetails onSelectDeliveryAddress={this.handleDeliveryAddress} />\n                                            </div>\n                                        </div>\n                                        <div className=\"card\">\n                                            <div className=\"card-header\" id=\"headingThree\">\n                                                <h5 className=\"mb-0\">\n                                                    <button className=\"btn btn-link collapsed\" type=\"button\" data-toggle=\"collapse\" data-target=\"#collapseThree\" aria-expanded=\"false\" aria-controls=\"collapseThree\">\n                                                        <span className=\"number\">3</span> Payment\n                                                    </button>\n                                                </h5>\n                                            </div>\n                                            <div id=\"collapseThree\" className=\"collapse\" aria-labelledby=\"headingThree\" data-parent=\"#accordionExample\">\n                                                <div className=\"checkout-step-body\">\n                                                    <div className=\"payment_method-checkout\">\n                                                        <div className=\"row\">\n                                                            <div className=\"col-md-12\">\n                                                                <div className=\"rpt100\">\n                                                                    <ul className=\"radio--group-inline-container_1\">\n                                                                        <li>\n                                                                            <div className=\"radio-item_1\">\n                                                                                <input id=\"cashondelivery1\" value=\"cash\" name=\"paymentmethod\" type=\"radio\" onChange={this.handleRadioChange} />\n                                                                                <label htmlFor=\"cashondelivery1\" className=\"radio-label_1\">Cash on Delivery</label>\n                                                                            </div>\n                                                                        </li>\n                                                                        <li>\n                                                                            <div className=\"radio-item_1\" onClick={this.handlePaymentSystem}>\n                                                                                {/* <input value=\"card\" name=\"paymentmethod\" type=\"button\" onClick={this.handleRadioChange} /> */}\n                                                                                <label htmlFor=\"card1\" className=\"radio-label_1\">Pay With Card</label>\n                                                                            </div>\n                                                                        </li>\n                                                                    </ul>\n                                                                </div>\n                                                                {\n                                                                    paymentmethod === \"cash\" ?\n                                                                        <button className=\"next-btn16 hover-btn\" onClick={this.handlePlaceOrder}>Confirm Order</button>\n                                                                        : ''\n                                                                }\n                                                            </div>\n                                                        </div>\n                                                    </div>\n                                                </div>\n\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div className=\"col-md-4\">\n                                <div className=\"card\">\n                                    <h5 className=\"card-header\">My Cart <span className=\"text-secondary float-right\">({cartItems.length} item)</span></h5>\n                                    {\n                                        cartItems.map((row, index) => (\n                                            <div className=\"card-body pt-0 pr-0 pl-0 pb-0\" key={index}>\n                                                <div className=\"cart-list-product\">\n                                                    <img className=\"img-fluid\" src={row.photo} alt=\"cart\" />\n                                                    <span className=\"badge badge-success\">{row.discountPer}% OFF</span>\n                                                    <h5>{row.name}</h5>\n                                                    <h6><strong><span className=\"mdi mdi-approval\" /> Available in</strong> - {row.unitSize} gm</h6>\n                                                    <p className=\"offer-price mb-0\">&#x20B9;{row.qty + '*' + row.netPrice} <i className=\"mdi mdi-tag-outline\" /> <span className=\"regular-price\">&#x20B9;{row.price}</span></p>\n                                                </div>\n                                            </div>\n                                        ))\n                                    }\n                                    <div className=\"total-checkout-group\">\n                                        <div className=\"cart-total-dil\">\n                                            <h4>Sub Total</h4>\n                                            <span>&#x20B9;{subTotal}</span>\n                                        </div>\n                                        <div className=\"cart-total-dil pt-3\">\n                                            <h4>Delivery Charges</h4>\n                                            <span>&#x20B9;{deliveryCharge}</span>\n                                        </div>\n                                    </div>\n                                    <div className=\"cart-total-dil saving-total \">\n                                        <h4>Total Saving</h4>\n                                        <span>&#x20B9;{discount}</span>\n                                    </div>\n                                    <div className=\"main-total-cart\">\n                                        <h2>Total</h2>\n                                        <span>&#x20B9;{grandTotal}</span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </section>\n\n\n            </div>\n        )\n    }\n}\n\nexport default connect(\n    (state) => ({\n        cartItems: state.cart.cartItems,\n    }),\n    { incrementToCart, decreaseToCart, removeFromCart }\n)(Checkout);"]},"metadata":{},"sourceType":"module"}